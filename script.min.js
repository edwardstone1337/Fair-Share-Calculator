window.onload=function(){if(localStorage.getItem("salary1")){document.getElementById("salary1").value=localStorage.getItem("salary1")}
if(localStorage.getItem("salary2")){document.getElementById("salary2").value=localStorage.getItem("salary2")}};function formatNumber(num){return num.toFixed(2).replace(/\d(?=(\d{3})+\.)/g,"$&,")}
function togglePassword(element,inputId){const inputField=document.getElementById(inputId);const type=inputField.getAttribute("type")==="password"?"text":"password";inputField.setAttribute("type",type);element.src=type==="password"?"Hide.svg":"Show.svg";if(type==="password"){inputField.classList.remove("input-error")}else{const isError=inputField.classList.contains("input-error");if(isError){inputField.classList.add("input-error")}}}
function animateCounter(elementId,finalNumber,duration=300){const counterElement=document.getElementById(elementId);let prefersReducedMotion=window.matchMedia("(prefers-reduced-motion: reduce)").matches;if(prefersReducedMotion){counterElement.textContent=formatNumber(finalNumber)}else{let startNumber=0;const step=(finalNumber-startNumber)/(duration/10);const timer=setInterval(function(){startNumber+=step;if((step>0&&startNumber>=finalNumber)||(step<0&&startNumber<=finalNumber)){startNumber=finalNumber;clearInterval(timer)}
counterElement.textContent=formatNumber(startNumber)},10)}}
function formatNumberWithCommas(element){element.classList.remove("input-error");var value=element.value.replace(/[^\d.,]/g,"");var formattedValue=value.replace(/,/g,"").replace(/\B(?=(\d{3})+(?!\d))/g,",");element.value=formattedValue;var errorMessage=document.getElementById("error-display");if(errorMessage){errorMessage.style.display="none"}}
function resetResultsDisplay(){document.getElementById("results").style.display="none";document.getElementById("error-display").style.display="none"}
function calculateShares(){var salary1=parseFloat(document.getElementById("salary1").value.replace(/,/g,""));var salary2=parseFloat(document.getElementById("salary2").value.replace(/,/g,""));var expense=parseFloat(document.getElementById("expense").value.replace(/,/g,""));var hasError=!1;if(isNaN(salary1)||salary1<=0){document.getElementById("salary1").classList.add("input-error");hasError=!0}else{document.getElementById("salary1").classList.remove("input-error")}
if(isNaN(salary2)||salary2<=0){document.getElementById("salary2").classList.add("input-error");hasError=!0}else{document.getElementById("salary2").classList.remove("input-error")}
if(isNaN(expense)||expense<=0){document.getElementById("expense").classList.add("input-error");hasError=!0}else{document.getElementById("expense").classList.remove("input-error")}
if(hasError){document.getElementById("error-display").innerHTML=`
            <div class="error-message" id="error-message" aria-live="assertive">
                <p>Oops! Looks like some numbers are missing. We need all of them to calculate your fair shares.</p>
            </div>
        `;document.getElementById("error-display").style.display="block";document.getElementById("error-message").scrollIntoView({behavior:"smooth",block:"nearest"});var headshakeContainer=document.querySelector(".headshake-container");headshakeContainer.classList.add("headshake");headshakeContainer.addEventListener("animationend",()=>{headshakeContainer.classList.remove("headshake")});return}
localStorage.setItem("salary1",document.getElementById("salary1").value);localStorage.setItem("salary2",document.getElementById("salary2").value);var totalSalary=salary1+salary2;var share1=(salary1/totalSalary)*expense;var share2=(salary2/totalSalary)*expense;document.getElementById("results").innerHTML=`
  <div class="share-container" id="share-container">
  <div class="share-container-text">
  <h2>VoilÃ !</h2>
  <p>Your fair share breakdown:</p>
  
</div>
      <div class="share-container-boxes">
          <div class="share">
              <div class="share-title">Your Share</div>
              <div class="share-value" id="share1-placeholder"></div>
          </div>
          <div class="share">
              <div class="share-title">Partner's Share</div>
              <div class="share-value" id="share2-placeholder"></div>
          </div>
      </div>
      <div class="share-container-text"><span class="text">Remember, the Fair Share Calculator is all about making sharing expenses simple, fair, and above all, stress-free</span>
      <div class="emoji">ðŸ§˜</div>
      </div>
  </div>
  
`;document.getElementById("results").style.display="block";animateCounter("share1-placeholder",share1,300);animateCounter("share2-placeholder",share2,300);animateCounter("share1-placeholder",share1,300);animateCounter("share2-placeholder",share2,300);document.getElementById("share-container").scrollIntoView({behavior:"smooth",block:"nearest"})}
document.addEventListener("DOMContentLoaded",function(){var modal=document.getElementById("myModal");var btn=document.getElementById("howitworksBtn");var closemodalLarge=document.getElementById("closemodalLarge");var closeSpan=document.getElementsByClassName("close")[0];btn.onclick=function(){modal.style.display="block";modal.scrollTop=0};function closeModal(){modal.style.display="none"}
closemodalLarge.onclick=closeModal;closeSpan.onclick=closeModal;window.onclick=function(event){if(event.target==modal){closeModal()}}});document.querySelectorAll("input").forEach((input)=>{input.addEventListener("keydown",function(event){if(event.key==="Enter"){event.preventDefault();calculateShares()}})})